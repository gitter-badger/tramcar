extends ../layout.jade

block title
  title Post Job

block content
  h1 Post Job

  if errors
    p #{errors.length} error(s) prevented this job from saving
    ol
    for e in errors
      li= e.msg

  form(name="new", action="/jobs", method="post")
    h4 Company
    select(name="_company")
      option(value="" selected)
      each company in companies
        //- TODO: find a better way to do this
        if job._company && job._company == company.id
          option(value="#{company.id}" selected)= company.name
        else
          option(value="#{company.id}")= company.name
    h4 Category
    select(name="_category")
      each category in categories
        //- TODO: find a better way to do this
        if job._category && job._category == category.id
          option(value="#{category.id}" selected)= category.name
        else
          option(value="#{category.id}")= category.name
    h4 Title
    input(type="text", name="title" value="#{job.title ? job.title : ''}")
    h4 Description
    textarea(name="description") #{job.description ? job.description : ''}
    h4 Application Info
    textarea(name="application_info") #{job.application_info ? job.application_info : ''}
    h4 Country
    select(name="_country")
      option(value="" selected)
      each country in countries
        //- TODO: find a better way to do this
        if job._country && job._country == country.id
          option(value="#{country.id}" selected)= country.name
        else
          option(value="#{country.id}")= country.name
    h4 Location
    textarea(name="location") #{job.location ? job.location : ''}
    h4 E-mail
    input(type="text", name="email" value="#{job.email ? job.email : ''}")
    input(type="submit", value="Submit" style="display:block;")
